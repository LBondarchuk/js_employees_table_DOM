{"version":3,"sources":["scripts/main.js"],"names":["headerIndex","headerList","document","querySelectorAll","listBody","querySelector","list","slice","formButton","errors","cellRevision","e","target","tagName","cell","perent","closest","selectCopy","cloneNode","input","children","createElement","startValue","innerHTML","classList","add","value","appendChild","lastChild","focus","addEventListener","replace","addCorrectSalary","checkAge","checkString","addNotification","length","keyEvent","code","blur","addNewPerson","preventDefault","inputs","personName","position","office","age","salary","newPerson","insertAdjacentHTML","forEach","doHighlight","item","a","remove","sort","indexForSort","indexOf","sortElements","getSortList","i","b","cells","localeCompare","getCorrectSalary","string","ch","notValidCharacters","includes","Number","number","formatSalary","success","error","notification","body","setTimeout"],"mappings":"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","file":"main.75a5fa52.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst headerList = [...document.querySelectorAll('th')];\nconst listBody = document.querySelector('tbody');\nlet list = [...document.querySelectorAll('tr')].slice(1, -1);\nlet headerIndex;\nconst formButton = document.querySelector('.form-button');\nlet errors = '';\n\ndocument.addEventListener('click', sort);\ndocument.addEventListener('click', doHighlight);\ndocument.addEventListener('dblclick', cellRevision);\nformButton.addEventListener('click', addNewPerson);\n\nfunction cellRevision(e) {\n  if (e.target.tagName === 'TD') {\n    const cell = e.target;\n    const perent = e.target.closest('TR');\n    const select = document.querySelector('select');\n    const selectCopy = select.cloneNode(true);\n    const input = perent.children[2] === cell\n      ? selectCopy : document.createElement('input');\n    const startValue = cell.innerHTML;\n\n    input.classList.add('cell-input');\n    input.value = startValue;\n    cell.innerHTML = '';\n    cell.appendChild(input);\n    cell.lastChild.focus();\n\n    input.addEventListener('blur', () => {\n      if (cell === perent.children[4]) {\n        if (!+input.value.slice(1).replace(',', '')) {\n          errors += 'Salary must be a number';\n        }\n\n        if (input.value[0] !== '$') {\n          input.value = addCorrectSalary(input.value);\n        }\n      } else {\n        perent.children[3] === cell\n          ? checkAge(input.value) : checkString(input.value);\n      }\n\n      if (input.value === startValue) {\n        return;\n      }\n\n      addNotification();\n\n      if (!errors.length) {\n        cell.innerHTML = input.value;\n        errors = '';\n\n        return;\n      }\n\n      cell.innerHTML = startValue;\n      errors = '';\n    });\n\n    cell.addEventListener('keydown', (keyEvent) => {\n      if (keyEvent.code === 'Enter') {\n        if (cell === perent.children[4]) {\n          if (!+input.value.slice(1).replace(',', '')) {\n            errors += 'Salary must be a number';\n          }\n\n          if (input.value[0] !== '$') {\n            input.value = addCorrectSalary(input.value);\n          }\n        } else {\n          perent.children[3] === cell\n            ? checkAge(input.value) : checkString(input.value);\n        }\n\n        if (input.value === startValue) {\n          input.blur();\n\n          return;\n        }\n        addNotification();\n\n        if (!errors.length) {\n          cell.innerHTML = input.value;\n          errors = '';\n        } else {\n          cell.innerHTML = startValue;\n          errors = '';\n        }\n      }\n    }\n    );\n  }\n}\n\nfunction addNewPerson(e) {\n  e.preventDefault();\n\n  const inputs = document.querySelectorAll('.input');\n  const personName = inputs[0].value;\n  const position = inputs[1].value;\n  const office = inputs[2].value;\n  const age = inputs[3].value;\n  const salary = inputs[4].value;\n\n  checkString(personName, 'Name');\n  checkString(position, 'Position');\n  checkAge(age);\n\n  const newPerson = `\n  <tr>\n  <td>${personName}</td>\n  <td>${position}</td>\n  <td>${office}</td>\n  <td>${age}</td>\n  <td>${addCorrectSalary(salary)}</td>\n  </tr>\n  `;\n\n  addNotification();\n\n  if (!errors.length) {\n    listBody.insertAdjacentHTML('beforeend', newPerson);\n    inputs.forEach(input => (input.value = ''));\n    inputs[2].value = 'Tokyo';\n  }\n  errors = '';\n}\n\nfunction doHighlight(e) {\n  if (e.target.tagName === 'TD') {\n    const item = e.target.closest('TR');\n\n    list.forEach(a => a.classList.remove('active'));\n\n    item.classList.add('active');\n  } else {\n    list.forEach(a => a.classList.remove('active'));\n  }\n}\n\nfunction sort(e) {\n  list = [...document.querySelectorAll('tr')].slice(1, -1);\n\n  if (e.target.tagName === 'TH') {\n    const item = e.target;\n    const indexForSort = headerList.indexOf(item);\n    const sortElements = getSortList(indexForSort);\n\n    listBody.innerHTML = '';\n\n    if (indexForSort === headerIndex) {\n      for (let i = list.length - 1; i >= 0; i--) {\n        listBody.appendChild(sortElements[i]);\n        headerIndex = null;\n      }\n    } else {\n      headerIndex = indexForSort;\n\n      for (let i = 0; i < list.length; i++) {\n        listBody.appendChild(sortElements[i]);\n      }\n    }\n  }\n}\n\nfunction getSortList(i) {\n  list = [...document.querySelectorAll('tr')].slice(1, -1);\n\n  let sortElements;\n\n  if (i !== 4) {\n    sortElements = list.sort((a, b) =>\n      a.cells[i].innerHTML\n        .localeCompare(b.cells[i].innerHTML));\n  } else {\n    sortElements = list.sort((a, b) =>\n      getCorrectSalary(a.cells[i].innerHTML) - getCorrectSalary(\n        b.cells[i].innerHTML));\n  }\n\n  return sortElements;\n}\n\nfunction getCorrectSalary(string) {\n  let salary = '';\n\n  for (let i = 0; i < string.length; i++) {\n    if (string[i] !== '$' && string[i] !== ',') {\n      salary += string[i];\n    }\n  }\n\n  return +salary;\n}\n\nfunction checkString(string, input = 'Field') {\n  const notValidCharacters = '?/|{:;})(*&^%$#@!~._-=+`\"';\n\n  if (string[0] === ' ') {\n    errors += `${input} must start with a letter \\n`;\n\n    return;\n  }\n\n  if (string.length < 4) {\n    errors += `${input}  must be at least 4 in length \\n`;\n\n    return;\n  }\n\n  for (const ch of string) {\n    if (notValidCharacters.includes(ch)) {\n      errors += `Characters in ${input} are not allowed\\n`;\n\n      return;\n    }\n\n    if (+ch === Number(ch) && ch !== ' ') {\n      errors += `Numbers in ${input} are not supported\\n`;\n\n      return;\n    }\n  }\n}\n\nfunction checkAge(number) {\n  if (!+number) {\n    return (errors += `Age must be a number \\n`);\n  }\n\n  if (+number < 18 || +number > 90) {\n    return (errors += `Age must be between 18 and 90 \\n`);\n  }\n}\n\nfunction addCorrectSalary(string) {\n  let formatSalary = '$';\n\n  for (let i = 0; i < string.length; i++) {\n    if (i === string.length - 4) {\n      formatSalary += (string[i] + ',');\n    } else {\n      formatSalary += string[i];\n    }\n  }\n\n  return formatSalary;\n}\n\nfunction addNotification() {\n  if (document.querySelector('.notification')) {\n    document.querySelector('.notification').remove();\n  }\n\n  const success = `\n    <div class=\"notification success\" data-qa=\"notification\">\n      <h2 class=\"title\">Data saved</h2>\n    </div>`;\n\n  const error = `\n    <div \n      class=\"notification error\" data-qa=\"notification\">\n      <h2 class=\"title\" style = \"margin: 0\">\n      Error\n      </h2>\n      <p style = \"margin-top: 0;\">${errors}</p>\n    </div>`;\n\n  const notification = !errors.length ? success : error;\n\n  document.body.insertAdjacentHTML('beforeend', notification);\n\n  setTimeout(() => {\n    if (document.querySelector('.notification')) {\n      document.querySelector('.notification').remove();\n    }\n  }, 2000);\n}\n"]}